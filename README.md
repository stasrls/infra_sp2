# api_yamdb
Проект YaMDb собирает отзывы (Review) пользователей на произведения (Titles). Произведения делятся на категории: «Книги», «Фильмы», «Музыка».
В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха.
Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.


# Инструкции по запуску
Для того чтобы развернуть образ на локальной машине, выполнитеследующиедействия.
1. Авторизоваться через консоль:
```sh
docker login -u <имя пользователя>
```
2. Загрузка образа с DockerHub
```sh
docker pull stasrls/infra:v1
```
3. Запустите Докер-контейнер с этим образом:
```sh
docker-compose up -d
```
4. Зайдите внутрь контейнера через консоль Bash:
```
docker exec -it <ID_контейнера> bash
```
5. Выполинте последовательно миграции и создание суперпользователя:
```sh
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
```
6. Наполнить БД тестовыми данными выполнив команду:
```sh
python manage.py dbfill
```
7. Запустить проект:
```sh
python manage.py runserver
```
8. Проверьте доступность сервиса
```sh
http://localhost/admin
```

# Переменные среды
Этот образ использует переменные среды для настройки. Добавьте файл .env в папку infra и заполните переменные необходимыми значениями.

|Переменные              |Значение Default               |Описание                                            |
|------------------------|-------------------------------|----------------------------------------------------|
|`DB_ENGINE`             |`django.db.backends.postgresql`|Указываем движок БД                                 |
|`DB_NAME`               |`postgres`                     |Имя базы данных                                     |
|`POSTGRES_USER`         |no default                     |Логин дляподключения к БД                           |
|`POSTGRES_PASSWORD`     |no default                     |Пароль для подключения к БД                         |
|`DB_HOST`               |`db`                           |Название сервиса (контейнера)                       |
|`DB_PORT`               |5432                           |Порт для подключения к БД                           |

### Авторы
Стасян
